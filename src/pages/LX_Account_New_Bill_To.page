<apex:page standardController="LX_SAP_Record__c" extensions="LX_Account_New_BillTo_Extension" sidebar="true" id="pg">
 <script>
    function getOrg(fieldId)
    {
     
     getValue(document.getElementById(fieldId+'_lkid').value);
  
    }
    </script>
    <apex:form id="fm">
        <apex:actionFunction name="getValue" action="{!getSoldToOrg}" immediate="true" reRender="pbs2">
            <apex:param name="pn" assignTo="{!sSoldToId}" value=""/>
        </apex:actionFunction>
        <apex:sectionHeader title="SAP Record" subtitle="New Bill To" />  
        <apex:pageBlock mode="Edit" id="pb">
         <apex:pageBlockButtons >
            <apex:commandButton action="{!SaveRecord}" value="Save" />
            <apex:commandButton action="{!cancel}" value="Cancel" /> 
         </apex:pageBlockButtons>
          <apex:pageBlockSection columns="2" title="Bill To Detail" id="pbs">
              <apex:inputField value="{!osRec.LX_Name__c}" /> 
              <apex:inputField value="{!osRec.LX_Physical_Street_Address__c}" required="true"/>
              <apex:inputField value="{!osRec.LX_Contact_First_Name__c}"/>
              <apex:inputField value="{!osRec.LX_Physical_Street_Address_2__c}"/>
              <apex:inputField value="{!osRec.LX_Contact_Last_Name__c}"/>
              <apex:inputField value="{!osRec.LX_Physical_City__c}" required="true"/>
              <apex:inputField value="{!osRec.LX_Sold_To__c}" required="true" onchange="getOrg('{!$Component.soldtoid}')" id="soldtoid"/>
              <apex:inputField value="{!osRec.LX_Physical_State__c}" />
              <apex:inputField value="{!osRec.LX_Default_Bill_To__c}"/>
              <apex:inputField value="{!osRec.LX_Physical_Province__c}"/>
              <apex:inputField value="{!osRec.LX_SMSA__c}"/>
              <apex:inputField value="{!osRec.LX_Physical_Postal_Code__c}" required="true"/>
              <apex:inputField value="{!osRec.LX_Collections__c}"/>
              <apex:inputField value="{!osRec.LX_Physical_Country__c}" required="true"/>
              <apex:inputField value="{!osRec.LX_SAP_Bill_To_ID__c}"/>
              <apex:inputField value="{!osRec.LX_Email__c}" required="true"/>
              <apex:inputField value="{!osRec.LX_Status__c}"/>
              <apex:inputField value="{!osRec.LX_Phone__c}"/>           
           </apex:pageBlockSection>
           <apex:pageBlockSection title="Bill To Sales Organization Detail"  id="pbs2" columns="1">
           <apex:pageMessage summary="Please select Sold To to display Sales Organization." severity="info" strength="1" />    
           <apex:pageBlockTable value="{!SalesOrg}" var="SOrg" id="pbt2">
              <apex:column headerValue="Select">       
                 <apex:inputCheckbox value="{!SOrg.selected}"/>
              </apex:column>
              <apex:column headerValue="Sales Organization" >             
                  <apex:outputField value="{!SOrg.oSalesOrg.LX_Sales_Org1__c}"/>
               </apex:column>  
              <apex:column headerValue="Sold To">             
                  <apex:outputField value="{!SOrg.oSalesOrg.LX_Sold_To__c}"/>
               </apex:column>
            </apex:pageBlockTable>            
           </apex:pageBlockSection>
        </apex:pageBlock>
    </apex:form>   
</apex:page>