<apex:page showHeader="false" standardStylesheets="false" controller="SitesCaseController"> 
  <apex:composition template="{!SITE_TEMPLATE_PRIMARY}" >
     <apex:define name="title"> 
        <title>{!SITE_NICKNAME} | {!$Label.Cases}</title>
    </apex:define>
    <apex:define name="javascriptcalls">
          <script type="text/javascript">
            jQuery(document).ready(function() {
              jQuery('.toolbar-cases').addClass('active');
              jQuery('.casetable').dataTable( {aaSorting: [], "bFilter": false, "bLengthChange": false, "iDisplayLength": 8, sDom: 'lfr<"dt_fixed_height"t>ip' });  
            });  
        </script>
     </apex:define>
    <apex:define name="body">  
        <div class="banner grid full-width breadcrumb">
             <div class="c5 m"> </div>
                 <div class="c11">
                    <nav>
                        <a class="home" href="{!$Site.CurrentSiteUrl}">{!$Label.Home}</a>
                        <a class="current" href="#">{!$Label.Cases}</a>
                 </nav>
            </div>
         </div>    
        <apex:outputPanel layout="block" styleClass="cp_core" rendered="{!!$ObjectType.case.accessible || !SITE_TAB_CASES}">
            <p>{!$Label.Insufficient_Privileges}</p>
        </apex:outputPanel>
        
        <apex:outputPanel layout="block" styleClass="cp_core" rendered="{!$ObjectType.case.accessible && SITE_TAB_CASES}">
            <apex:pageMessages />
            <div class="column leftcol">
                <div class="callout new-case">
                    <apex:form rendered="{!$ObjectType.case.createable}">
                        <apex:outputLink styleclass="new-case" value="{!$page.CaseWebSubmit}">{!$Label.Submit_New_Case}</apex:outputLink>
                    </apex:form>    
                    
                </div><!-- /New Case Button -->
            </div><!-- /Left Column -->
            
            <div class="column right-23">
                <div class="callout cases">
                    <div class="title-bar">
                        <span class="sprite_cpicons cases">&nbsp;</span>{!$Label.Cases}
                        <span class="returned-results"></span>
                    </div><!-- /Cases Title Bar -->
                    
                    <span class="title-bar sub-title-bar needs-attn">{!$Label.Needs_Your_Attention}
                        <span class="returned-results">
                            <apex:outputLink styleClass="export-excel" value="{!$page.cases_export}">
                                <apex:param name="casetype" value="Open-Needs Customer Attention"/> 
                                <span class="sprite_cpicons excel" title="Export to Excel" />
                            </apex:outputLink>
                        </span>
                    </span>
                        <!-- /Needs Your Attention Title Bar -->
                    <div class="callout-content cases-content">
                        <div class="case-results">
                            <apex:outputText styleclass="no-records" rendered="{!CasesNeedsAttention.size==0}" value="No cases to display" />
                            <apex:outputPanel rendered="{!CasesNeedsAttention.size!=0}">
                                <table cellpadding="0" cellspacing="0" border="0" class="display casetable">
                                    <thead>
                                        <tr>
                                            <th>{!$Label.Case_ID}</th>
                                            <th>{!$Label.Case_Subject}</th>
                                            <th>{!$Label.Contacts}</th>
                                            <th>{!$Label.Open_Date}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                         <apex:repeat value="{!CasesNeedsAttention}" var="c">
                                          <tr>  
                                                <td class="case-id">
                                                    <apex:outputLink value="{!$page.casedetails}" styleClass="results-case-id">{!c.casenumber}
                                                        <apex:param name="id" value="{!c.id}"/>
                                                     </apex:outputLink>
                                                </td>
                                                <td class="case-subject">{!c.Subject}</td>
                                                <td class="case-name">{!c.Contact.Name}</td>
                                                <td class="case-date"><apex:outputfield value="{!c.createddate}" /></td>
                                          </tr>
                                         </apex:repeat>
                                    </tbody>
                              </table>
                           </apex:outputPanel>           
                        </div><!-- /Case Results  -->
                    </div><!-- /Needs Your Attention -->
                        
                    <span class="title-bar sub-title-bar open-cases">{!$Label.Open_Cases}
                        <span class="returned-results">
                            <apex:outputLink styleClass="export-excel" value="{!$page.cases_export}">
                                <apex:param name="casetype" value="New,Open-Working"/> 
                                <span class="sprite_cpicons excel" title="Export to Excel" />
                            </apex:outputLink>
                        </span>
                    </span>

                        <!-- /Open Cases Title Bar -->
                    <div class="callout-content cases-content">
                        <div class="case-results">
                            <apex:outputText styleclass="no-records" rendered="{!CasesOpen.size==0}" value="No cases to display" />
                            <apex:outputPanel rendered="{!CasesOpen.size!=0}">
                                <table cellpadding="0" cellspacing="0" border="0" class="display casetable">
                                            <thead>
                                                <tr>
                                                    <th>{!$Label.Case_ID}</th>
                                            		<th>{!$Label.Case_Subject}</th>
                                            		<th>{!$Label.Contacts}</th>
                                            		<th>{!$Label.Open_Date}</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                 <apex:repeat value="{!CasesOpen}" var="c">
                                                  <tr>  
                                                        <td class="case-id">
                                                            <apex:outputLink value="{!$page.casedetails}" styleClass="results-case-id">{!c.casenumber}
                                                                <apex:param name="id" value="{!c.id}"/>
                                                             </apex:outputLink>
                                                        </td>
                                                        <td class="case-subject">{!c.Subject}</td>
                                                        <td class="case-name">{!c.Contact.Name}</td>
                                                        <td class="case-date"><apex:outputfield value="{!c.createddate}" /></td>
                                                  </tr>
                                                 </apex:repeat>
                                            </tbody>
                                      </table>
                             </apex:outputPanel>         
                        </div><!-- /Case Results  -->
                    </div><!-- /Open Cases -->
                    
                    <span class="title-bar sub-title-bar on-hold-cases">{!$Label.On_Hold}
                        <span class="returned-results">
                            <apex:outputLink styleClass="export-excel" value="{!$page.cases_export}">
                                <apex:param name="casetype" value="On Hold"/>
                                <span class="sprite_cpicons excel" title="Export to Excel" />
                            </apex:outputLink>
                        </span>
                    </span>
                    
                        <!-- /On-Hold Cases Title Bar -->
                    <div class="callout-content cases-content">
                        <div class="case-results">
                            <apex:outputText styleclass="no-records" rendered="{!CasesHold.size==0}" value="No cases to display" />
                            <apex:outputPanel rendered="{!CasesHold.size!=0}">
                                    <table cellpadding="0" cellspacing="0" border="0" class="display casetable">
                                            <thead>
                                                <tr>
                                                    <th>{!$Label.Case_ID}</th>
                                            		<th>{!$Label.Case_Subject}</th>
                                            		<th>{!$Label.Contacts}</th>
                                            		<th>{!$Label.Open_Date}</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                 <apex:repeat value="{!CasesHold}" var="c">
                                                  <tr>  
                                                        <td class="case-id">
                                                            <apex:outputLink value="{!$page.casedetails}" styleClass="results-case-id">{!c.casenumber}
                                                                <apex:param name="id" value="{!c.id}"/>
                                                             </apex:outputLink>
                                                        </td>
                                                        <td class="case-subject">{!c.Subject}</td>
                                                        <td class="case-name">{!c.Contact.Name}</td>
                                                        <td class="case-date"><apex:outputfield value="{!c.createddate}" /></td>
                                                  </tr>
                                                 </apex:repeat>
                                            </tbody>
                                      </table>
                           </apex:outputPanel>           
                        </div><!-- /Case Results  -->
                    </div><!-- /On-Hold Cases -->
                    
                    <span class="title-bar sub-title-bar closed-cases">{!$Label.Closed_Cases}
                        <span class="returned-results">
                            <apex:outputLink styleClass="export-excel" value="{!$page.cases_export}">
                                <apex:param name="casetype" value="Closed"/>
                                <span class="sprite_cpicons excel" title="Export to Excel" />
                            </apex:outputLink>
                        </span>
                    </span>
                    
                        <!-- /Closed Cases Title Bar -->
                    <div class="callout-content cases-content">
                        <div class="case-results">
                            <apex:outputText styleclass="no-records" rendered="{!CasesClosed.size==0}" value="No cases to display" />
                            <apex:outputPanel rendered="{!CasesClosed.size!=0}">
                                    <table cellpadding="0" cellspacing="0" border="0" class="display casetable">
                                            <thead>
                                                <tr>
                                                    <th>{!$Label.Case_ID}</th>
                                            		<th>{!$Label.Case_Subject}</th>
                                            		<th>{!$Label.Contacts}</th>
                                            		<th>{!$Label.Open_Date}</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                 <apex:repeat value="{!CasesClosed}" var="c">
                                                  <tr>  
                                                        <td class="case-id">
                                                            <apex:outputLink value="{!$page.casedetails}" styleClass="results-case-id">{!c.casenumber}
                                                                <apex:param name="id" value="{!c.id}"/>
                                                             </apex:outputLink>
                                                        </td>
                                                        <td class="case-subject">{!c.Subject}</td>
                                                        <td class="case-name">{!c.Contact.Name}</td>
                                                        <td class="case-date"><apex:outputfield value="{!c.createddate}" /></td>
                                                  </tr>
                                                 </apex:repeat>
                                            </tbody>
                                      </table>
                            </apex:outputPanel>             
                        </div><!-- /Case Results  -->
                    </div><!-- /Closed Cases -->
                    
                    
                    
                </div><!-- /Cases -->
            </div><!-- /Right Two-Thirds -->
            
        </apex:outputPanel><!-- /Cp Core -->
        
    </apex:define>
  </apex:composition>
</apex:page>