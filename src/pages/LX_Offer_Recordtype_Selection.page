<apex:page standardController="LX_Offer__c" extensions="LX_Offer_Recordtype_Selection_Extension">    
        <apex:form id="frm">
         <script type="text/javascript">
            //alert('TEST');
            var returnUrl = "{!m_QueryString}";
            if(returnUrl != '' && returnUrl != null)
            {
            
                //alert('ret url == '+returnUrl);
                window.open(returnUrl,"_self","");
            }
         </script>

            <apex:pagemessages id="msg" ></apex:pagemessages>        
            <apex:sectionHeader subtitle="Offer" title="Record Type Selection"/>        
            <apex:pageBlock id="pb">
                <apex:pageBlockSection columns="1" title="Offer Header Details">
                    <!--Amit update the LX_Offer__c to TempOffer to ensure the field values are carried over-->
                    <apex:inputField value="{!offer.Name}"/>
                    <apex:inputField value="{!offer.LX_Description__c}"/>               
                    <apex:inputField value="{!offer.LX_Start_Date__c}">
                         <apex:actionSupport event="onchange" action="{!populateQuoteCat}" reRender="pb" status="stat" />    
                    </apex:inputField>
                    <apex:inputField value="{!offer.LX_End_Date__c}">
                        <apex:actionSupport event="onchange" action="{!populateQuoteCat}" reRender="pb" status="stat" />     
                    </apex:inputField>
                    <apex:outputField value="{!offer.Quote_Type__c}"/>
                    <apex:inputField value="{!offer.LX_Offer_Status__c}"/>
                    <!-- apex:inputField value="{!offer.LX_Offer_Enrollment_Type__c}" / -->
                    <!--Amit update the LX_Offer__c to TempOffer to ensure the field values are carried over-->
                </apex:pageBlockSection>
                <apex:pageblocksection columns="1" title="Quote Category Details">
                    <apex:selectList id="questions" value="{!isquestion}" size="1" label="Is this quote for a specific end user customer?" >
                    <apex:SelectOptions value="{!Questions}"/>
                    </apex:selectList>   
                </apex:pageblockSection>
                <apex:pageblockSection columns="1" id="pbs2">
                    <apex:selectList id="questions2" value="{!isquestion2}" size="1" label="Does this Offer require a quote in Dealdesk?" >
                    <apex:SelectOptions value="{!Questions2}"/>
                    <!-- <apex:actionSupport event="onchange" action="{!onChangeQuestion2}" reRender="pbs1,pbs,msg,SalesOrg,qtcatgry" status="stat" /> -->
                    <apex:actionSupport event="onchange" action="{!onChangeQuestion2}" reRender="pb" status="stat" />
                    </apex:selectList>
                </apex:pageblockSection>
                <!--Kapil(2/17/2014):Quote Category changes--> 
                <apex:pageblockSection columns="1" id="qtcatgry">
                    <apex:outputField value="{!LX_Offer__c.LX_Quote_Category__c}" / >                       
                </apex:pageblockSection>                
                <apex:pageblocksection columns="1" id="pbs1">                    
                    <apex:selectList id="offerType" value="{!Offer.LX_Offer_Type__c}" size="1" label="{!$Label.LX_offer_Type}" rendered="{!showOfferType}">
                        <apex:SelectOptions value="{!lstOptions}"/>
                        <!-- <apex:actionSupport event="onchange" action="{!onChangeOfferType}" reRender="pbs,msg,SalesOrg,qtcatgry" status="stat"  /> -->
                        <apex:actionSupport event="onchange" action="{!onChangeOfferType}" reRender="pb" status="stat"  />
                    </apex:selectList>   
                </apex:pageblocksection>        
                <apex:pageblocksection id="pbs" columns="1">
                    <apex:selectList value="{!incentivizer}" rendered="{!showIncentives}" size="1"  label="{!$Label.LX_Lexmark_Incentivizing}"  >
                        <apex:selectOptions value="{!incentivizersList}">
                        </apex:selectOptions>
                        <!-- <apex:actionSupport event="onchange" reRender="pbs,msg" action="{!onChangeIncentives}" status="stat"/> -->
                    </apex:selectList>  
                    
                    <apex:selectList value="{!target}" size="1" id="target" label="Is there a Target defined with a Sales Incentive ?" rendered="{!showTarget}">
                        <apex:selectOptions value="{!targetList}">
                        </apex:selectOptions>
                         <!-- <apex:actionSupport event="onchange" reRender="pbs,msg" action="{!onChangeTarget}" status="stat" /> -->
                         <apex:actionSupport event="onchange" reRender="pb" action="{!onChangeTarget}" status="stat" />
                    </apex:selectList> 
                   
                   <!-- <apex:inputField label="{!$Label.LX_Offer_Starting_Date}" id="offStDate" rendered="{!showOfferDates}" value="{!TempOffer.LX_Start_Date__c}">
                    <apex:actionSupport event="onchange" rerender="pbs,msg" action="{!onDateInput}"/>
                    </apex:inputField>
                    <apex:inputField label="{!$Label.LX_Offer_Ending_Date}" id="offEndDate" rendered="{!showOfferDates}" value="{!TempOffer.LX_End_Date__c}">
                    <apex:actionSupport event="onchange" rerender="pbs,msg" action="{!onDateInput}"/>
                    </apex:inputField>-->
                    <apex:inputField value="{!Offer.daysClaimDueIn_quote__c}" rendered="{!showPrice}"/>  
                    <apex:inputField value="{!Offer.AdditionalAcceleratorsLoyaltyEtc_Quote__c}" rendered="{!showLogs}"/>
                    <apex:inputField value="{!Offer.lRPurpose__c}" rendered="{!showLogs}"/>
                    <apex:inputField value="{!Offer.maxPayoutForVIR_Quote__c}" rendered="{!showLogs}"/>
<!--                <apex:inputField value="{!Offer.revenueBaseForCalculation_quote__c}" rendered="{!showLogs}"/>  -->
                    <apex:inputField value="{!Offer.targetBasedOn_quote__c}" rendered="{!showLogs}"/>
<!--                <apex:inputField value="{!Offer.Product_Line_Series_discount_applied__c}" rendered="{!showLogs}"/>  -->
                    <apex:inputField value="{!Offer.LX_annualPayout_quote__c}" rendered="{!OR(showMkt,showMDF)}"/>
                    <apex:inputField value="{!Offer.LX_mDFBudgetAmount_quote__c}" rendered="{!OR(showMkt,showMDF)}"/>
                    <apex:inputField value="{!Offer.LX_payoutSchedule_quote__c}" rendered="{!OR(showMkt,showMDF,showVir,showlogi)}"/>
                    <apex:inputField value="{!Offer.ValidateSerialNos_quote__c}" rendered="{!showPro}"/>
                    <apex:inputField value="{!Offer.sellInOut_quote__c}" rendered="{!showPro}"/>
                    <apex:inputField value="{!Offer.daysClaimDueIn_quote__c}" rendered="{!showPro}"/>
                    <apex:inputField value="{!Offer.promotionDescription_quote__c}" rendered="{!showPro}"/>
                    <apex:inputField value="{!Offer.promotionsGroups_quote__c}" rendered="{!showPro}"/>
                    <apex:inputField value="{!Offer.promotionCategory_quote__c}" rendered="{!showPro}"/>
                    <apex:inputField value="{!Offer.Product_Line_Series_discount_applied__c}" rendered="{!OR(showdiscapplied,showPro,showVir,showLogs,showPriceP)}"/>
<!--                <apex:inputField value="{!Offer.thresh_hold_quote__c}" rendered="{!OR(showPro,showSbc)}"/>  -->
<!--                <apex:inputField value="{!Offer.Product_Line_Series_discount_applied__c}" rendered="{!showPro}"/> -->
                    <apex:inputField value="{!Offer.AdditionalAcceleratorsLoyaltyEtc_Quote__c}" rendered="{!showVir}"/>
                    <apex:inputField value="{!Offer.revenueBaseForCalculation_quote__c}" rendered="{!OR(showVir,showLogs)}"/>                    
                    <apex:inputField value="{!Offer.Is_this_LR_with_target__c}" rendered="{!showlogi}"/>                    
                    <apex:inputField value="{!Offer.maxPayoutForVIR_Quote__c}" rendered="{!showVir}"/>
<!--                <apex:inputField value="{!Offer.LX_payoutSchedule_quote__c}" rendered="{!showVir}"/>  -->
                    <apex:inputField value="{!Offer.targetBasedOn_quote__c}" rendered="{!showVir}"/>
<!--                <apex:inputField value="{!Offer.Product_Line_Series_discount_applied__c}" rendered="{!showVir}"/> -->
                    <apex:inputField value="{!Offer.ValidateSerialNos_quote__c}" rendered="{!showSbc}"/>
                    <apex:inputField value="{!Offer.sellInOut_quote__c}" rendered="{!showSbc}"/>
                    <apex:inputField value="{!Offer.daysClaimDueIn_quote__c}" rendered="{!showSbc}"/>
<!--                <apex:inputField value="{!Offer.thresh_hold_quote__c}" rendered="{!showSbc}"/>  -->
                    <apex:inputField value="{!Offer.doesThisQuoteRequireAnSPR_quote__c}" rendered="{!showSbc}"/>
             </apex:pageBlockSection>  
             <div align="center">
                    <apex:actionStatus id="stat">
                    <apex:facet name="start">
                        <apex:image value="{!$Resource.LX_Loading}" style="width:35px; height:35px"/>
                    </apex:facet>
                    </apex:actionStatus>
             </div> 
             <apex:pageBlockSection columns="2" title="Sales Organization" id="SalesOrg" >         
                    <apex:inputField value="{!LX_Offer__c.salesRegion_quote__c}" >
                    <apex:actionSupport event="onchange" rerender="SalesOrg"
                                action="{!getSalesOrgSelectOptions}" status="counterStatus" 
                                />
                    </apex:inputField>
                     <apex:actionStatus id="counterStatus" style="align:center;" >
                        <apex:facet name="start" >
                        <apex:image url="{!$Resource.Lx_Progress_Bar}" height="20" width="20" />                       
                    </apex:facet>
                    </apex:actionStatus>
                    <apex:selectList value="{!m_SessionCurrency}" label="Quote Currency" size="1">
                        <apex:selectOptions value="{!SessionCurrencyValues}"/>
                    </apex:selectList>
                    <!--Kapil(2/17/2014):Quote Category changes--> 
                    <!--<apex:outputField value="{!LX_Offer__c.LX_Quote_Category__c}" / >-->
                    <!--<apex:inputField value="{!LX_Offer__c.salesOrg_quote__c}"/>
                    <apex:inputField value="{!LX_Offer__c.salesOffice_quote__c}"/>
                    <apex:inputField value="{!LX_Offer__c.salesGroup_quote__c}"/>
                    <apex:inputField value="{!LX_Offer__c.salesGeo_quote__c}"/>
                    <apex:inputField value="{!LX_Offer__c.sessionCurrency_quote__c}"/>

                    <apex:selectList value="{!m_salesOrg}" label="Sales Org" size="1">
                        <apex:selectOptions value="{!salesOrgValues}"/>
                    </apex:selectList>
                    <apex:selectList value="{!m_salesOffice}" label="Sales Office" size="1">
                        <apex:selectOptions value="{!salesOfficeValues}"/>
                    </apex:selectList>
                    <apex:selectList value="{!m_salesGroup}" label="Sales Group" size="1">
                        <apex:selectOptions value="{!salesGroupValues}"/>
                    </apex:selectList>
                    <apex:selectList value="{!m_salesGEO}" label="Sales GEO" size="1">
                        <apex:selectOptions value="{!salesGEOValues}"/>
                    </apex:selectList>
                    -->                         
                         </apex:pageBlockSection>      
                         
             <apex:pageBlockButtons location="bottom">
                 <apex:commandButton action="{!selectRecordType}" value="Continue"/>
                 <apex:commandButton action="{!cancel}" value="Cancel"/>
             </apex:pageBlockButtons>
            </apex:pageBlock>
            
        </apex:form>
    </apex:page>