<apex:page showHeader="false" standardStylesheets="false" controller="SitesCaseController_Channel"> 
<title>{!SITE_NICKNAME} | Cases</title>
  <apex:composition template="{!SITE_TEMPLATE_PRIMARY}" >
    <apex:define name="body">  
        <script type="text/javascript">
            jQuery(document).ready(function() {
              jQuery('.toolbar-cases').addClass('active');
              jQuery('.casetable').dataTable( {aaSorting: [], "bFilter": false, "bLengthChange": false, "iDisplayLength": 8, sDom: 'lfr<"dt_fixed_height"t>ip' });  
            });  
        </script>
        <div class="breadcrumb">
            <ul>
                <li><a class="sprite_cpicons home" href="{!$Site.CurrentSiteUrl}">Home</a><span>&#187;</span></li>
                <li><a class="current" href="#">Cases</a></li>
            </ul>
        </div> 
        <apex:outputPanel layout="block" styleClass="cp_core" rendered="{!!$ObjectType.case.accessible || !SITE_TAB_CASES_CHANNEL}">
            <p>Sorry, you do not have access to this content due to insufficient privileges.</p>
        </apex:outputPanel>
        
        <apex:outputPanel layout="block" styleClass="cp_core" rendered="{!$ObjectType.case.accessible && SITE_TAB_CASES_CHANNEL}">
            <apex:pageMessages />
            <div class="column leftcol">
                <div class="callout new-case">
                	<!-- Story S-97014 Done by Hemlata -->
                    <apex:form rendered="{!IF(($ObjectType.case.createable && (SITE_ACCOUNT.Type !='Partner-OEM' && SITE_ACCOUNT.Type !='ISYS - OEM' && SITE_ACCOUNT.Type !='BW- OEM' && SITE_ACCOUNT.Type !='Pallas – OEM')),'true','false')}">
                        <apex:outputLink styleclass="new-case" value="{!$page.Channel_Case_route}">Submit New Case</apex:outputLink>
                    </apex:form> 
                    <apex:form rendered="{!IF(($ObjectType.case.createable && (SITE_ACCOUNT.Type=='Partner-OEM' || SITE_ACCOUNT.Type=='ISYS - OEM' || SITE_ACCOUNT.Type=='BW- OEM' ||SITE_ACCOUNT.Type=='Pallas – OEM')),'true','false')}">
                        <apex:outputLink styleclass="new-case" value="{!$page.casewebsubmit_channel}">Submit New Case</apex:outputLink>
                    </apex:form>    
                    
                </div><!-- /New Case Button -->
            </div><!-- /Left Column -->
            
            <div class="column right-23">
                <div class="callout cases">
                    <div class="title-bar">
                        <span class="sprite_cpicons cases">&nbsp;</span>Cases
                        <span class="returned-results"></span>
                    </div><!-- /Cases Title Bar -->
                    
                    <span class="title-bar sub-title-bar needs-attn">Needs Your Attention
                        <span class="returned-results">
                            <apex:outputLink styleClass="export-excel" value="{!$page.cases_export}">
                                <apex:param name="casetype" value="Open-Needs Customer Attention"/> 
                                <span class="sprite_cpicons excel" title="Export to Excel" />
                            </apex:outputLink>
                        </span>
                    </span>
                        <!-- /Needs Your Attention Title Bar -->
                    <div class="callout-content cases-content">
                        <div class="case-results">
                            <apex:outputText styleclass="no-records" rendered="{!CasesNeedsAttention.size==0}" value="No cases to display" />
                            <apex:outputPanel rendered="{!CasesNeedsAttention.size!=0}">
                                <table cellpadding="0" cellspacing="0" border="0" class="display casetable">
                                    <thead>
                                        <tr>
                                            <th>Case ID</th>
                                            <th>Case Subject</th>
                                            <th>Contact</th>
                                            <th>Open Date</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                         <apex:repeat value="{!CasesNeedsAttention}" var="c">
                                          <tr>  
                                                <td class="case-id">
                                                    <apex:outputLink value="{!$page.casedetails_Channel}" styleClass="results-case-id">{!c.casenumber}
                                                        <apex:param name="id" value="{!c.id}"/>
                                                     </apex:outputLink>
                                                </td>
                                                <td class="case-subject">{!c.Subject}</td>
                                                <td class="case-name">{!c.Contact.Name}</td>
                                                <td class="case-date"><apex:outputfield value="{!c.createddate}" /></td>
                                          </tr>
                                         </apex:repeat>
                                    </tbody>
                              </table>
                           </apex:outputPanel>           
                        </div><!-- /Case Results  -->
                    </div><!-- /Needs Your Attention -->
                        
                    <span class="title-bar sub-title-bar open-cases">Open Cases
                        <span class="returned-results">
                            <apex:outputLink styleClass="export-excel" value="{!$page.cases_export}">
                                <apex:param name="casetype" value="New,Open-Working"/> 
                                <span class="sprite_cpicons excel" title="Export to Excel" />
                            </apex:outputLink>
                        </span>
                    </span>

                        <!-- /Open Cases Title Bar -->
                    <div class="callout-content cases-content">
                        <div class="case-results">
                            <apex:outputText styleclass="no-records" rendered="{!CasesOpen.size==0}" value="No cases to display" />
                            <apex:outputPanel rendered="{!CasesOpen.size!=0}">
                                <table cellpadding="0" cellspacing="0" border="0" class="display casetable">
                                            <thead>
                                                <tr>
                                                    <th>Case ID</th>
                                                    <th>Case Subject</th>
                                                    <th>Contact</th>
                                                    <th>Open Date</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                 <apex:repeat value="{!CasesOpen}" var="c">
                                                  <tr>  
                                                        <td class="case-id">
                                                            <apex:outputLink value="{!$page.casedetails_Channel}" styleClass="results-case-id">{!c.casenumber}
                                                                <apex:param name="id" value="{!c.id}"/>
                                                             </apex:outputLink>
                                                        </td>
                                                        <td class="case-subject">{!c.Subject}</td>
                                                        <td class="case-name">{!c.Contact.Name}</td>
                                                        <td class="case-date"><apex:outputfield value="{!c.createddate}" /></td>
                                                  </tr>
                                                 </apex:repeat>
                                            </tbody>
                                      </table>
                             </apex:outputPanel>         
                        </div><!-- /Case Results  -->
                    </div><!-- /Open Cases -->
                    
                    <span class="title-bar sub-title-bar on-hold-cases">On-Hold Cases
                        <span class="returned-results">
                            <apex:outputLink styleClass="export-excel" value="{!$page.cases_export}">
                                <apex:param name="casetype" value="On Hold"/>
                                <span class="sprite_cpicons excel" title="Export to Excel" />
                            </apex:outputLink>
                        </span>
                    </span>
                    
                        <!-- /On-Hold Cases Title Bar -->
                    <div class="callout-content cases-content">
                        <div class="case-results">
                            <apex:outputText styleclass="no-records" rendered="{!CasesHold.size==0}" value="No cases to display" />
                            <apex:outputPanel rendered="{!CasesHold.size!=0}">
                                    <table cellpadding="0" cellspacing="0" border="0" class="display casetable">
                                            <thead>
                                                <tr>
                                                    <th>Case ID</th>
                                                    <th>Case Subject</th>
                                                    <th>Contact</th>
                                                    <th>Open Date</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                 <apex:repeat value="{!CasesHold}" var="c">
                                                  <tr>  
                                                        <td class="case-id">
                                                            <apex:outputLink value="{!$page.casedetails_Channel}" styleClass="results-case-id">{!c.casenumber}
                                                                <apex:param name="id" value="{!c.id}"/>
                                                             </apex:outputLink>
                                                        </td>
                                                        <td class="case-subject">{!c.Subject}</td>
                                                        <td class="case-name">{!c.Contact.Name}</td>
                                                        <td class="case-date"><apex:outputfield value="{!c.createddate}" /></td>
                                                  </tr>
                                                 </apex:repeat>
                                            </tbody>
                                      </table>
                           </apex:outputPanel>           
                        </div><!-- /Case Results  -->
                    </div><!-- /On-Hold Cases -->
                    
                    <span class="title-bar sub-title-bar closed-cases">Closed Cases
                        <span class="returned-results">
                            <apex:outputLink styleClass="export-excel" value="{!$page.cases_export}">
                                <apex:param name="casetype" value="Closed"/>
                                <span class="sprite_cpicons excel" title="Export to Excel" />
                            </apex:outputLink>
                        </span>
                    </span>
                    
                        <!-- /Closed Cases Title Bar -->
                    <div class="callout-content cases-content">
                        <div class="case-results">
                            <apex:outputText styleclass="no-records" rendered="{!CasesClosed.size==0}" value="No cases to display" />
                            <apex:outputPanel rendered="{!CasesClosed.size!=0}">
                                    <table cellpadding="0" cellspacing="0" border="0" class="display casetable">
                                            <thead>
                                                <tr>
                                                    <th>Case ID</th>
                                                    <th>Case Subject</th>
                                                    <th>Contact</th>
                                                    <th>Open Date</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                 <apex:repeat value="{!CasesClosed}" var="c">
                                                  <tr>  
                                                        <td class="case-id">
                                                            <apex:outputLink value="{!$page.casedetails_Channel}" styleClass="results-case-id">{!c.casenumber}
                                                                <apex:param name="id" value="{!c.id}"/>
                                                             </apex:outputLink>
                                                        </td>
                                                        <td class="case-subject">{!c.Subject}</td>
                                                        <td class="case-name">{!c.Contact.Name}</td>
                                                        <td class="case-date"><apex:outputfield value="{!c.createddate}" /></td>
                                                  </tr>
                                                 </apex:repeat>
                                            </tbody>
                                      </table>
                            </apex:outputPanel>             
                        </div><!-- /Case Results  -->
                    </div><!-- /Closed Cases -->
                    
                    
                    
                </div><!-- /Cases -->
            </div><!-- /Right Two-Thirds -->
            
        </apex:outputPanel><!-- /Cp Core -->
        
    </apex:define>
  </apex:composition>
</apex:page>