global with sharing class cloudWS
{
public static parseCloudJS pj = getcloudWS();
public String selected_server{get;set;}
public String iframeSource {get; set; }
public string server_toRender{get; set;}
public integer days_remaining{get{return pj.company.days_remaining;} set;}
public static string days_string{get; set;}

public cloudWS()
{
if(ApexPages.currentPage().getParameters().get('server') != null)
{
server_toRender = ApexPages.currentPage().getParameters().get('server');
system.debug('xxx' +server_toRender);
}
}

global static parseCloudJS getcloudWS()
{

Http httpProtocol = new Http();
HttpRequest request = new HttpRequest();


String userID  = Userinfo.getUserID();
String CompanyNumber = '';
List<User> lstUsers = database.query('Select ID,Contact.Account.Company_number__c,Contact.Account.Platform_services__c from User where ID =: userID limit 1');
if(lstUsers.size() > 0 && lstUsers[0].Contact!= null && lstUsers[0].Contact.account != null)
{
    CompanyNumber = lstUsers[0].Contact.Account.get('Company_Number__c')+'';
}
/*String CompanyNumber = ((List<User>)(database.query('Select ID,Contact.Account.Company_number__c,Contact.Account.Platform_services__c from User where ID =: Userinfo.getUserID() limit 1')))[0].Contact.Account.get('Company_Number__c')+'';*/


/*User objUser = [Select ID,Contact.Account.Company_number__c,Contact.Account.Platform_services__c from User where ID =: Userinfo.getUserID() limit 1];*/

/*String CompanyNumber = '';
if(objUser.Contact != null && objUser.Contact.Account != null)
    CompanyNumber = objUser.Contact.Account.get('Company_Number__c')+'';*/
String endpoint = 'https://stats.perceptivecloud.com/companies/';
endpoint = endpoint + CompanyNumber ;
//String endpoint = 'https://stats.perceptivecloud.com/companies/AN00005698';
system.debug('xxx' +endpoint);
request.setEndPoint(endpoint);
request.setMethod('GET');


HttpResponse response;
if(test.isRunningTest())
{
	
	  response = httpProtocol.send(request);
}
else
{
  response = new HttpResponse();
   // String json = '{\"company\":{\"name\":\"Cinemark\",\"company_number\":\"7E08CB\",\"purchased_space\":100,\"days_remaining\":250,\"quota_used\":54719,\"app_servers\":[{\"id\":442,\"name\":\"Cine1 - Production\",\"external_ip\":\"208.89.113.5\",\"installed_apps\":[{\"name\":\"ImageNow\",\"app_version\":\"6.6.0.406\",\"license_stats\":[{\"imagenow_count\":8,\"webnow_count\":0,\"created_at\":\"2012-11-30T04:48:38Z\"},{\"imagenow_count\":8,\"webnow_count\":0,\"created_at\":\"2012-11-30T03:48:38Z\"},{\"imagenow_count\":15,\"webnow_count\":0,\"created_at\":\"2012-11-30T02:48:38Z\"},{\"imagenow_count\":15,\"webnow_count\":0,\"created_at\":\"2012-11-30T01:48:38Z\"},{\"imagenow_count\":14,\"webnow_count\":0,\"created_at\":\"2012-11-30T00:48:37Z\"},{\"imagenow_count\":16,\"webnow_count\":0,\"created_at\":\"2012-11-29T23:48:39Z\"},{\"imagenow_count\":18,\"webnow_count\":0,\"created_at\":\"2012-11-29T22:48:37Z\"},{\"imagenow_count\":19,\"webnow_count\":0,\"created_at\":\"2012-11-29T21:48:38Z\"},{\"imagenow_count\":17,\"webnow_count\":0,\"created_at\":\"2012-11-29T20:48:37Z\"},{\"imagenow_count\":14,\"webnow_count\":0,\"created_at\":\"2012-11-29T19:48:37Z\"},{\"imagenow_count\":13,\"webnow_count\":0,\"created_at\":\"2012-11-29T18:48:37Z\"},{\"imagenow_count\":11,\"webnow_count\":0,\"created_at\":\"2012-11-29T17:48:37Z\"},{\"imagenow_count\":11,\"webnow_count\":0,\"created_at\":\"2012-11-29T16:48:37Z\"},{\"imagenow_count\":8,\"webnow_count\":0,\"created_at\":\"2012-11-29T15:48:38Z\"},{\"imagenow_count\":6,\"webnow_count\":0,\"created_at\":\"2012-11-29T14:48:36Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-29T13:48:36Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-29T12:48:36Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-29T11:48:36Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-29T10:48:36Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-29T09:48:36Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-29T08:48:36Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-29T07:48:35Z\"},{\"imagenow_count\":6,\"webnow_count\":0,\"created_at\":\"2012-11-29T06:48:35Z\"},{\"imagenow_count\":7,\"webnow_count\":0,\"created_at\":\"2012-11-29T05:48:35Z\"},{\"imagenow_count\":6,\"webnow_count\":0,\"created_at\":\"2012-11-29T04:48:35Z\"},{\"imagenow_count\":6,\"webnow_count\":0,\"created_at\":\"2012-11-29T03:48:35Z\"},{\"imagenow_count\":7,\"webnow_count\":0,\"created_at\":\"2012-11-29T02:48:35Z\"},{\"imagenow_count\":10,\"webnow_count\":0,\"created_at\":\"2012-11-29T01:48:35Z\"},{\"imagenow_count\":10,\"webnow_count\":0,\"created_at\":\"2012-11-29T00:48:35Z\"},{\"imagenow_count\":7,\"webnow_count\":0,\"created_at\":\"2012-11-28T23:48:35Z\"},{\"imagenow_count\":9,\"webnow_count\":0,\"created_at\":\"2012-11-28T22:48:35Z\"},{\"imagenow_count\":14,\"webnow_count\":0,\"created_at\":\"2012-11-28T21:48:34Z\"},{\"imagenow_count\":14,\"webnow_count\":0,\"created_at\":\"2012-11-28T20:48:34Z\"},{\"imagenow_count\":12,\"webnow_count\":0,\"created_at\":\"2012-11-28T19:48:34Z\"},{\"imagenow_count\":11,\"webnow_count\":0,\"created_at\":\"2012-11-28T18:48:34Z\"},{\"imagenow_count\":10,\"webnow_count\":0,\"created_at\":\"2012-11-28T17:48:34Z\"},{\"imagenow_count\":10,\"webnow_count\":0,\"created_at\":\"2012-11-28T16:48:34Z\"},{\"imagenow_count\":7,\"webnow_count\":0,\"created_at\":\"2012-11-28T15:48:35Z\"},{\"imagenow_count\":7,\"webnow_count\":0,\"created_at\":\"2012-11-28T14:48:34Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-28T13:48:34Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-28T12:48:33Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-28T11:48:33Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-28T10:48:33Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-28T09:48:33Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-28T08:48:33Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-28T07:48:33Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-28T06:48:33Z\"},{\"imagenow_count\":6,\"webnow_count\":0,\"created_at\":\"2012-11-28T05:48:33Z\"},{\"imagenow_count\":5,\"webnow_count\":0,\"created_at\":\"2012-11-28T04:48:33Z\"},{\"imagenow_count\":7,\"webnow_count\":0,\"created_at\":\"2012-11-28T03:48:33Z\"},{\"imagenow_count\":9,\"webnow_count\":0,\"created_at\":\"2012-11-28T02:48:32Z\"},{\"imagenow_count\":8,\"webnow_count\":0,\"created_at\":\"2012-11-28T01:48:33Z\"},{\"imagenow_count\":7,\"webnow_count\":0,\"created_at\":\"2012-11-28T00:48:35Z\"},{\"imagenow_count\":6,\"webnow_count\":0,\"created_at\":\"2012-11-27T23:48:32Z\"},{\"imagenow_count\":11,\"webnow_count\":0,\"created_at\":\"2012-11-27T22:48:32Z\"},{\"imagenow_count\":12,\"webnow_count\":0,\"created_at\":\"2012-11-27T21:48:32Z\"},{\"imagenow_count\":13,\"webnow_count\":0,\"created_at\":\"2012-11-27T20:48:32Z\"},{\"imagenow_count\":13,\"webnow_count\":0,\"created_at\":\"2012-11-27T19:48:32Z\"},{\"imagenow_count\":13,\"webnow_count\":0,\"created_at\":\"2012-11-27T18:48:31Z\"},{\"imagenow_count\":9,\"webnow_count\":0,\"created_at\":\"2012-11-27T17:48:31Z\"},{\"imagenow_count\":9,\"webnow_count\":0,\"created_at\":\"2012-11-27T16:48:31Z\"},{\"imagenow_count\":12,\"webnow_count\":0,\"created_at\":\"2012-11-27T15:48:32Z\"},{\"imagenow_count\":10,\"webnow_count\":0,\"created_at\":\"2012-11-27T14:48:31Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-27T13:48:31Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-27T12:48:31Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-27T11:48:31Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-27T10:48:31Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-27T09:48:30Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-27T08:48:30Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-27T07:48:30Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-27T06:48:30Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-27T05:48:30Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-27T04:48:30Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-27T03:48:30Z\"},{\"imagenow_count\":6,\"webnow_count\":0,\"created_at\":\"2012-11-27T02:48:30Z\"},{\"imagenow_count\":8,\"webnow_count\":0,\"created_at\":\"2012-11-27T01:48:30Z\"},{\"imagenow_count\":8,\"webnow_count\":0,\"created_at\":\"2012-11-27T00:48:30Z\"},{\"imagenow_count\":9,\"webnow_count\":0,\"created_at\":\"2012-11-26T23:48:29Z\"},{\"imagenow_count\":14,\"webnow_count\":0,\"created_at\":\"2012-11-26T22:48:29Z\"},{\"imagenow_count\":19,\"webnow_count\":0,\"created_at\":\"2012-11-26T21:48:29Z\"},{\"imagenow_count\":17,\"webnow_count\":0,\"created_at\":\"2012-11-26T20:48:29Z\"},{\"imagenow_count\":13,\"webnow_count\":0,\"created_at\":\"2012-11-26T19:48:29Z\"},{\"imagenow_count\":11,\"webnow_count\":0,\"created_at\":\"2012-11-26T18:48:29Z\"},{\"imagenow_count\":12,\"webnow_count\":0,\"created_at\":\"2012-11-26T17:48:29Z\"},{\"imagenow_count\":8,\"webnow_count\":0,\"created_at\":\"2012-11-26T16:48:29Z\"},{\"imagenow_count\":9,\"webnow_count\":0,\"created_at\":\"2012-11-26T15:48:30Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-26T14:48:28Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-26T13:48:28Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-26T12:48:28Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-26T11:48:28Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-26T10:48:28Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-26T09:48:28Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-26T08:48:32Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-26T07:48:28Z\"},{\"imagenow_count\":6,\"webnow_count\":0,\"created_at\":\"2012-11-26T06:48:28Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-26T05:48:27Z\"},{\"imagenow_count\":5,\"webnow_count\":0,\"created_at\":\"2012-11-26T04:48:27Z\"},{\"imagenow_count\":7,\"webnow_count\":0,\"created_at\":\"2012-11-26T03:48:27Z\"},{\"imagenow_count\":10,\"webnow_count\":0,\"created_at\":\"2012-11-26T02:48:27Z\"},{\"imagenow_count\":6,\"webnow_count\":0,\"created_at\":\"2012-11-26T01:48:27Z\"},{\"imagenow_count\":6,\"webnow_count\":0,\"created_at\":\"2012-11-26T00:48:27Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-25T23:48:27Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-25T22:48:27Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-25T21:48:27Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-25T20:48:26Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-25T19:48:26Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-25T18:48:26Z\"},{\"imagenow_count\":1,\"webnow_count\":0,\"created_at\":\"2012-11-25T17:48:26Z\"},{\"imagenow_count\":5,\"webnow_count\":0,\"created_at\":\"2012-11-25T16:48:26Z\"},{\"imagenow_count\":5,\"webnow_count\":0,\"created_at\":\"2012-11-25T15:48:27Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-25T14:48:26Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-25T13:48:26Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-25T12:48:26Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-25T11:48:26Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-25T10:48:25Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-25T09:48:25Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-25T08:48:25Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-25T07:48:25Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-25T06:48:25Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-25T05:48:25Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-25T04:48:25Z\"},{\"imagenow_count\":6,\"webnow_count\":0,\"created_at\":\"2012-11-25T03:48:25Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-25T02:48:24Z\"},{\"imagenow_count\":6,\"webnow_count\":0,\"created_at\":\"2012-11-25T01:48:24Z\"},{\"imagenow_count\":7,\"webnow_count\":0,\"created_at\":\"2012-11-25T00:48:24Z\"},{\"imagenow_count\":8,\"webnow_count\":0,\"created_at\":\"2012-11-24T23:48:24Z\"},{\"imagenow_count\":6,\"webnow_count\":0,\"created_at\":\"2012-11-24T22:48:24Z\"},{\"imagenow_count\":6,\"webnow_count\":0,\"created_at\":\"2012-11-24T21:48:24Z\"},{\"imagenow_count\":5,\"webnow_count\":0,\"created_at\":\"2012-11-24T20:48:24Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-24T19:48:24Z\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2012-11-24T18:48:24Z\"},{\"imagenow_count\":1,\"webnow_count\":0,\"created_at\":\"2012-11-24T17:48:24Z\"},{\"imagenow_count\":1,\"webnow_count\":0,\"created_at\":\"2012-11-24T16:48:23Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-24T15:48:24Z\"},{\"imagenow_count\":1,\"webnow_count\":0,\"created_at\":\"2012-11-24T14:48:23Z\"},{\"imagenow_count\":1,\"webnow_count\":0,\"created_at\":\"2012-11-24T13:48:23Z\"},{\"imagenow_count\":1,\"webnow_count\":0,\"created_at\":\"2012-11-24T12:48:23Z\"},{\"imagenow_count\":1,\"webnow_count\":0,\"created_at\":\"2012-11-24T11:48:23Z\"},{\"imagenow_count\":1,\"webnow_count\":0,\"created_at\":\"2012-11-24T10:48:23Z\"},{\"imagenow_count\":1,\"webnow_count\":0,\"created_at\":\"2012-11-24T09:48:23Z\"},{\"imagenow_count\":1,\"webnow_count\":0,\"created_at\":\"2012-11-24T08:48:22Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-24T07:48:22Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-24T06:48:22Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-24T05:48:22Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-24T04:48:22Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-24T03:48:22Z\"},{\"imagenow_count\":5,\"webnow_count\":0,\"created_at\":\"2012-11-24T02:48:22Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-24T01:48:22Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-24T00:48:22Z\"},{\"imagenow_count\":7,\"webnow_count\":0,\"created_at\":\"2012-11-23T23:48:22Z\"},{\"imagenow_count\":6,\"webnow_count\":0,\"created_at\":\"2012-11-23T22:48:21Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-23T21:48:21Z\"},{\"imagenow_count\":5,\"webnow_count\":0,\"created_at\":\"2012-11-23T20:48:21Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-23T19:48:21Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-23T18:48:21Z\"},{\"imagenow_count\":1,\"webnow_count\":0,\"created_at\":\"2012-11-23T17:48:21Z\"},{\"imagenow_count\":1,\"webnow_count\":0,\"created_at\":\"2012-11-23T16:48:21Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-23T15:48:21Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-23T14:48:21Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-23T13:48:20Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-23T12:48:20Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-23T11:48:20Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-23T10:48:20Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-23T09:48:20Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-23T08:48:20Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-23T07:48:20Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-23T06:48:20Z\"},{\"imagenow_count\":5,\"webnow_count\":0,\"created_at\":\"2012-11-23T05:48:20Z\"},{\"imagenow_count\":5,\"webnow_count\":0,\"created_at\":\"2012-11-23T04:48:19Z\"},{\"imagenow_count\":7,\"webnow_count\":0,\"created_at\":\"2012-11-23T03:48:19Z\"},{\"imagenow_count\":6,\"webnow_count\":0,\"created_at\":\"2012-11-23T02:48:19Z\"},{\"imagenow_count\":5,\"webnow_count\":0,\"created_at\":\"2012-11-23T01:48:19Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-23T00:48:19Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-22T23:48:19Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-22T22:48:19Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-22T21:48:19Z\"},{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2012-11-22T20:48:19Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-22T19:48:18Z\"},{\"imagenow_count\":7,\"webnow_count\":0,\"created_at\":\"2012-11-22T18:48:18Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-22T17:48:18Z\"},{\"imagenow_count\":2,\"webnow_count\":0,\"created_at\":\"2012-11-22T16:48:18Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-22T15:48:19Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-22T14:48:18Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-22T13:48:18Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-22T12:48:18Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-22T11:48:18Z\"},{\"imagenow_count\":3,\"webnow_count\":0,\"created_at\":\"2012-11-22T10:48:17Z\"},{\"imagenow_count\":5,\"webnow_count\":0,\"created_at\":\"2012-11-22T09:48:17Z\"},{\"imagenow_count\":6,\"webnow_count\":0,\"created_at\":\"2012-11-22T08:48:17Z\"},{\"imagenow_count\":6,\"webnow_count\":0,\"created_at\":\"2012-11-22T07:48:17Z\"},{\"imagenow_count\":8,\"webnow_count\":0,\"created_at\":\"2012-11-22T06:48:17Z\"},{\"imagenow_count\":5,\"webnow_count\":0,\"created_at\":\"2012-11-22T05:48:17Z\"},{\"imagenow_count\":8,\"webnow_count\":0,\"created_at\":\"2012-11-22T04:48:17Z\"},{\"imagenow_count\":8,\"webnow_count\":0,\"created_at\":\"2012-11-22T03:48:17Z\"},{\"imagenow_count\":9,\"webnow_count\":0,\"created_at\":\"2012-11-22T02:48:17Z\"},{\"imagenow_count\":6,\"webnow_count\":0,\"created_at\":\"2012-11-22T01:48:17Z\"},{\"imagenow_count\":7,\"webnow_count\":0,\"created_at\":\"2012-11-22T00:48:16Z\"}]}]},{\"id\":443,\"name\":\"Cine2 - Production - BI \",\"external_ip\":\"208.89.113.6\",\"installed_apps\":[]}],\"quota_trend\":[{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-01T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-02T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-03T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-04T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-05T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-06T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-07T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-09T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-10T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-11T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-12T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-13T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-14T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-15T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-16T05:00:00Z\"},{\"purchased_space\":100,\"used_space\":45032,\"created_at\":\"2012-10-17T05:00:00Z\"},{\"purchased_space\":100,\"used_space\":45446,\"created_at\":\"2012-10-18T05:00:00Z\"},{\"purchased_space\":100,\"used_space\":45540,\"created_at\":\"2012-10-19T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-20T05:00:00Z\"},{\"purchased_space\":100,\"used_space\":45742,\"created_at\":\"2012-10-21T05:00:00Z\"},{\"purchased_space\":100,\"used_space\":45779,\"created_at\":\"2012-10-22T05:00:00Z\"},{\"purchased_space\":100,\"used_space\":46041,\"created_at\":\"2012-10-23T05:00:00Z\"},{\"purchased_space\":100,\"used_space\":46690,\"created_at\":\"2012-10-24T05:00:00Z\"},{\"purchased_space\":100,\"used_space\":47053,\"created_at\":\"2012-10-25T05:00:00Z\"},{\"purchased_space\":100,\"used_space\":47239,\"created_at\":\"2012-10-26T05:00:00Z\"},{\"purchased_space\":100,\"used_space\":47832,\"created_at\":\"2012-10-27T05:00:00Z\"},{\"purchased_space\":100,\"used_space\":47846,\"created_at\":\"2012-10-28T05:00:00Z\"},{\"purchased_space\":100,\"used_space\":47896,\"created_at\":\"2012-10-29T05:00:00Z\"},{\"purchased_space\":100,\"used_space\":48054,\"created_at\":\"2012-10-30T05:00:00Z\"},{\"purchased_space\":100,\"used_space\":48323,\"created_at\":\"2012-10-31T05:00:00Z\"},{\"purchased_space\":100,\"used_space\":48627,\"created_at\":\"2012-11-01T05:00:00Z\"},{\"purchased_space\":100,\"used_space\":48883,\"created_at\":\"2012-11-02T05:00:00Z\"},{\"purchased_space\":100,\"used_space\":49303,\"created_at\":\"2012-11-03T05:00:00Z\"},{\"purchased_space\":100,\"used_space\":49326,\"created_at\":\"2012-11-04T05:00:00Z\"},{\"purchased_space\":100,\"used_space\":49329,\"created_at\":\"2012-11-05T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":49646,\"created_at\":\"2012-11-06T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":50161,\"created_at\":\"2012-11-07T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":50586,\"created_at\":\"2012-11-08T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":50810,\"created_at\":\"2012-11-09T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":51106,\"created_at\":\"2012-11-10T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":51161,\"created_at\":\"2012-11-11T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":51214,\"created_at\":\"2012-11-12T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":51426,\"created_at\":\"2012-11-13T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":51779,\"created_at\":\"2012-11-14T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":52277,\"created_at\":\"2012-11-15T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":52696,\"created_at\":\"2012-11-16T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":52911,\"created_at\":\"2012-11-17T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":52926,\"created_at\":\"2012-11-18T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":52927,\"created_at\":\"2012-11-19T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":53090,\"created_at\":\"2012-11-20T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":53479,\"created_at\":\"2012-11-21T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":53624,\"created_at\":\"2012-11-22T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":53624,\"created_at\":\"2012-11-23T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":51975,\"created_at\":\"2012-11-24T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":53656,\"created_at\":\"2012-11-25T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":53680,\"created_at\":\"2012-11-26T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":54032,\"created_at\":\"2012-11-27T06:00:00Z\"},{\"purchased_space\":100,\"used_space\":54333,\"created_at\":\"2012-11-28T06:00:00Z\"}],\"hosted_locations\":{\"arsalon\":[{\"created_at\":\"2012-10-01T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-02T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-03T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-04T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-05T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-06T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-07T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-08T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-09T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-10T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-11T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-12T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-13T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-14T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-15T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-16T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-17T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-18T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-19T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-20T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-21T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-22T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-23T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-24T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-25T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-26T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-27T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-28T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-29T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-30T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-10-31T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2012-11-01T00:00:00+00:00\",\"uptime_mins\":1440}]}}}';
      String json = '{\"company\":{\"name\":\"Bellevue University\",\"company_number\":\"6A4574\",\"purchased_space\":250,\"days_remaining\":582,\"quota_used\":216278,\"app_servers\":[{\"id\":431,\"name\":\"Bellevue1 - Production\",\"external_ip\":\"204.13.99.179\",\"installed_apps\":[{\"name\":\"ImageNow\",\"app_version\":\"6.6.0.911\",\"license_stats\":[{\"imagenow_count\":4,\"webnow_count\":0,\"created_at\":\"2014-04-18T07:41:17-05:00\"},{\"imagenow_count\":1,\"webnow_count\":0,\"created_at\":\"2014-04-18T06:41:18-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-18T05:41:16-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-18T04:41:16-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-18T03:41:17-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-18T02:41:17-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-18T01:41:18-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-18T00:41:19-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-17T23:41:17-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-17T22:41:15-05:00\"},{\"imagenow_count\":1,\"webnow_count\":0,\"created_at\":\"2014-04-17T21:41:15-05:00\"},{\"imagenow_count\":1,\"webnow_count\":0,\"created_at\":\"2014-04-17T20:41:15-05:00\"},{\"imagenow_count\":1,\"webnow_count\":0,\"created_at\":\"2014-04-17T19:41:18-05:00\"},{\"imagenow_count\":1,\"webnow_count\":0,\"created_at\":\"2014-04-17T18:41:18-05:00\"},{\"imagenow_count\":2,\"webnow_count\":2,\"created_at\":\"2014-04-17T17:41:16-05:00\"},{\"imagenow_count\":14,\"webnow_count\":6,\"created_at\":\"2014-04-17T16:41:53-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-14T07:23:46-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-14T06:23:46-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-14T05:23:46-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-14T04:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-14T03:23:55-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-14T02:23:46-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-14T01:23:47-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-14T00:23:46-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T23:23:46-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T22:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T21:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T20:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T19:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T18:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T17:23:46-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T16:23:45-05:00\"},{\"imagenow_count\":1,\"webnow_count\":0,\"created_at\":\"2014-04-13T15:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T14:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T13:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T12:23:46-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T11:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T10:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T09:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T08:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T07:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T06:23:46-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T05:23:46-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T04:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T03:23:53-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T02:23:46-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T01:23:46-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-13T00:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-12T23:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-12T22:23:46-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-12T21:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-12T20:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-12T19:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-12T18:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-12T17:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":1,\"created_at\":\"2014-04-12T16:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":1,\"created_at\":\"2014-04-12T15:23:46-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-12T14:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-12T13:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-12T12:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-12T11:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":1,\"created_at\":\"2014-04-12T10:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-12T09:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-12T08:23:46-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-12T07:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-12T06:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-12T05:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-12T04:23:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-12T03:23:54-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-12T02:58:46-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-12T01:58:49-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-12T00:58:46-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-11T23:58:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-11T22:58:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-11T21:58:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-11T20:58:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-11T19:58:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-11T18:58:51-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-11T17:58:45-05:00\"},{\"imagenow_count\":3,\"webnow_count\":4,\"created_at\":\"2014-04-11T16:58:45-05:00\"},{\"imagenow_count\":18,\"webnow_count\":5,\"created_at\":\"2014-04-11T15:58:45-05:00\"},{\"imagenow_count\":19,\"webnow_count\":2,\"created_at\":\"2014-04-11T14:58:46-05:00\"},{\"imagenow_count\":18,\"webnow_count\":5,\"created_at\":\"2014-04-11T13:58:45-05:00\"},{\"imagenow_count\":13,\"webnow_count\":6,\"created_at\":\"2014-04-11T12:58:45-05:00\"},{\"imagenow_count\":16,\"webnow_count\":6,\"created_at\":\"2014-04-11T11:58:46-05:00\"},{\"imagenow_count\":20,\"webnow_count\":10,\"created_at\":\"2014-04-11T10:58:46-05:00\"},{\"imagenow_count\":21,\"webnow_count\":6,\"created_at\":\"2014-04-11T09:58:46-05:00\"},{\"imagenow_count\":17,\"webnow_count\":6,\"created_at\":\"2014-04-11T08:58:46-05:00\"},{\"imagenow_count\":8,\"webnow_count\":1,\"created_at\":\"2014-04-11T07:58:45-05:00\"},{\"imagenow_count\":1,\"webnow_count\":0,\"created_at\":\"2014-04-11T06:58:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-11T05:58:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-11T04:58:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-11T03:58:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-11T02:58:46-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-11T01:58:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-11T00:58:46-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-10T23:58:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-10T22:58:45-05:00\"},{\"imagenow_count\":0,\"webnow_count\":0,\"created_at\":\"2014-04-10T21:58:45-05:00\"},{\"imagenow_count\":1,\"webnow_count\":0,\"created_at\":\"2014-04-10T20:58:45-05:00\"},{\"imagenow_count\":1,\"webnow_count\":0,\"created_at\":\"2014-04-10T19:58:46-05:00\"}]}]},{\"id\":432,\"name\":\"Bellevue2 - Production - BI \",\"external_ip\":\"208.89.113.102\",\"installed_apps\":[]}],\"quota_trend\":[{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":null,\"used_space\":0,\"created_at\":\"2012-10-08T05:00:00Z\"},{\"purchased_space\":250,\"used_space\":213270,\"created_at\":\"2014-03-24T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":215152,\"created_at\":\"2014-03-25T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":215862,\"created_at\":\"2014-03-26T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":213985,\"created_at\":\"2014-03-27T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":214228,\"created_at\":\"2014-03-28T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":214228,\"created_at\":\"2014-03-28T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":214182,\"created_at\":\"2014-03-30T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":214154,\"created_at\":\"2014-03-31T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":214336,\"created_at\":\"2014-04-01T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":214675,\"created_at\":\"2014-04-02T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":214809,\"created_at\":\"2014-04-03T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":214890,\"created_at\":\"2014-04-04T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":214897,\"created_at\":\"2014-04-05T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":214889,\"created_at\":\"2014-04-06T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":214888,\"created_at\":\"2014-04-07T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":215102,\"created_at\":\"2014-04-08T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":215383,\"created_at\":\"2014-04-09T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":215566,\"created_at\":\"2014-04-10T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":215606,\"created_at\":\"2014-04-11T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":215629,\"created_at\":\"2014-04-12T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":215574,\"created_at\":\"2014-04-13T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":215566,\"created_at\":\"2014-04-14T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":215566,\"created_at\":\"2014-04-14T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":215566,\"created_at\":\"2014-04-14T00:00:00-05:00\"},{\"purchased_space\":250,\"used_space\":216278,\"created_at\":\"2014-04-17T00:00:00-05:00\"}],\"hosted_locations\":{\"arsalon\":[{\"created_at\":\"2014-03-01T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-02T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-03T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-04T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-05T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-06T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-07T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-08T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-09T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-10T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-11T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-12T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-13T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-14T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-15T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-16T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-17T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-18T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-19T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-20T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-21T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-22T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-23T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-24T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-25T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-26T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-27T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-28T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-29T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-03-30T00:00:00+00:00\",\"uptime_mins\":1435},{\"created_at\":\"2014-03-31T00:00:00+00:00\",\"uptime_mins\":1440},{\"created_at\":\"2014-04-01T00:00:00+00:00\",\"uptime_mins\":1440}]}}}';
    response.setBody(json );
  
}


//HttpResponse response = httpProtocol.send(request);
System.debug(response.getBody());
string resbody = response.getBody();
resbody = resbody.replace('date','date_cs');
if(resbody.contains('No Storage Growth'))
{
resbody = resbody.replace('\"No Storage Growth\"','0');
days_string = 'No Storage Growth';
}
if(resbody.contains('Insufficent Data'))
{
resbody = resbody.replace('\"Insufficent Data\"','0');
days_string = 'Insufficent Data';
}
system.debug('Afterxx'+resbody);
type t = Type.forName('parseCloudJS');
parseCloudJS pja = new parseCloudJS();
try
{
pja = (parseCloudJS)JSON.deserialize(resbody,t);
}
catch(JSONException e)
{
system.debug('EXCEPTION' +e.getMessage());
}
system.debug('wrapper' +pja); 
system.debug('wrapperxyz' +pja.company); 

return pja;
}
//-------Disk Space Usage------------------------
@remoteAction
global static List<parseCloudJS.Quota_trend> getQT()
{
system.debug('xxx'+pj);
List<parseCloudJS.Quota_trend> qtLst = new List<parseCloudJS.Quota_trend>();
qtLst.addall(pj.Company.quota_trend);
system.debug('ZZZZ'+qtLst);
return qtLst;
}
//Uptime Chart-----------------------------------
@remoteAction
global static List<parseCloudJS.Arsalon> getUT()
{
List<parseCloudJS.Arsalon> upsLst = PJ.Company.hosted_locations.arsalon;
system.debug('UPSLIST' +upsLst);
return upsLst;
}

//License Stats Chart------------------

@remoteAction
global static List<parseCloudJS.License_stats> getlstats(string selectedserver)
{
List<parseCloudJS.App_servers> Servers = pj.Company.app_servers;
List<parseCloudJS.Installed_apps> applst = new List<parseCloudJS.Installed_apps>();
List<parseCloudJS.License_stats> LicStats = new List<parseCloudJS.License_stats>();
for(parseCloudJS.App_servers aps : servers)
{
if(selectedserver != null && aps.name == selectedserver)
{
applst = aps.installed_apps;
}
}
if(!applst.isempty())
{
for(parseCloudJS.Installed_apps inap : applst)
if(inap.name == 'ImageNow')
{
LicStats = inap.license_stats;
}
}
//system.debug('---App Server Size---' +applst.size());
//system.debug('llsstt' +LicStats);
return LicStats;
}




   //Servers      
   public List<SelectOption> getServers() 
    {
    List<SelectOption> options = new List<SelectOption>();
    if(pj != null)
    {
    List<parseCloudJS.App_servers> Servers = pj.Company.app_servers;
                                                    
    
     options.add(new SelectOption('None','-- None --'));    
     for (parseCloudJS.App_servers aps : servers) 
     {
      options.add(new SelectOption((String)aps.name,(String)aps.name));
     }    
     }
      return options;
    } 
    
    public PageReference reloadIframe() 
    {
        iframeSource = 'apex/cloudcharts_chrome?server='+selected_server+'';
        return null;
    }
    
    public void donothing()
    {
    
    }
}